---
layout: known_issue
title:  "Issues with Android 4.4"
date:   2014-04-02 14:51:00
categories: known_issues
platforms: Android
---

##Loading Cordova.js fails

Android 4.4 has a problem with the filename `cordova.js`. This is countered so that in Android Scanner 3.1.3+ `cordova.js` is also available as `zordova.js`. Using `zordova.js` instead of `cordova.js` seems to fix the issue.

A cross-platform workaround for this is to load `http://localhost/cordova.js` on iOS and `http://localhost/zordova.js` on Android. This can be done by implementing the following in the application's layout HTML's instead of the regular `cordova.js` load tag:

{% highlight javascript %}
<script id="ag-cordova-loader"></script>
<script src="/javascripts/cordova-loader.js"></script>
{% endhighlight %}

Then create the file `www/javascripts/cordova-loader.js` and add:

{% highlight javascript %}
document.addEventListener("DOMContentLoaded", function() {
  document.getElementById("ag-cordova-loader").src = "http://localhost/cordova.js";
});
{% endhighlight %}

And in new file `www/javascripts/cordova-loader.android.js`:

{% highlight javascript %}
document.addEventListener("DOMContentLoaded", function() {
  document.getElementById("ag-cordova-loader").src = "http://localhost/zordova.js";
});
{% endhighlight %}

The `.android.` file extension will allow Android client to use a different file than the iOS client uses. See more information about this in [this guide](http://guides.appgyver.com/steroids/guides/android/android-extension/).

More information about this issue can be found [on GitHub](https://github.com/AppGyver/scanner/issues/184).

##<!DOCTYPE HTML> breaks the CSS and shows loading.png

Android 4.4 has a problem with the HTML files starting with `<!DOCTYPE HTML>`. If this is removed from the files, CSS loads normally. We are working towards fixing this problem, but in the meanwhile removing `<!DOCTYPE HTML>` works fine as it does not seem to break anything.

##Animations from and to non-preloaded WebViews

On Android 4.4 animations from and to WebViews that haven't been preloaded are currently not very pleasing to the eye.

##Loading a faulty document results in a black screen

Currently on Android 4.4 loading a faulty document to a WebView usually results in a black screen, which is not very informative about the error that happened.

##Orientation settings

Android 4.4 doesn't currently support other orientation settings than "only portrait allowed".

##ChromeView not supported

Currently Android 4.4 uses the plain old WebView which does not include any of the nicest features such as remote debugging.

##Cordova events work inconsisently

Cordova events `pause`, `resume` and `destroy` are currently working on Android 4.4 very inconsistently and they might crash the app.